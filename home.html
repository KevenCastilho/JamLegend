<html>
<head>
<title>SdEmu - JamLegend emulated</title>
<script src="/script/lib.js" type="text/javascript">
</script>
<script>

function getCookie(c_name){
if (document.cookie.length>0){
  c_start=document.cookie.indexOf(c_name + "=");
  if (c_start!=-1){
    c_start=c_start + c_name.length+1;
    c_end=document.cookie.indexOf(";",c_start);
    if (c_end==-1) c_end=document.cookie.length;
    return unescape(document.cookie.substring(c_start,c_end));
    }
  }
return "";
}     

function setCookie(c_name,value,expiredays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate()+expiredays);
document.cookie=c_name+ "=" +escape(value)+
((expiredays==null) ? "" : ";expires="+exdate.toUTCString());
}

function showdownPreSettings() {
document.getElementById('container').innerHTML = '<form onsubmit="showdown();"><table><tr><td style="text-decoration:blink;color:333333">Address:</td><td><input id="address" type=text value="' + window.location.host + '"></td></tr><tr><td style="text-decoration:blink;color:333333">Name:</td><td><input id="nickname" type=text maxlength=15 value="'+ getCookie("SdEmuName") +'"></td></tr><tr><td style="text-decoration:blink;color:333333">Password:</td><td><input id="password" type=password maxlength=15 value="'+getCookie("SdEmuPassword")+'"></td></tr><tr><td style="text-decoration:blink;color:333333">Port:</td><td><input id="port" type=text value="770"></td></tr><tr><td></td><td><input id="openSd" type="submit" value="lets go" onclick="showdown();"></td><td></td><tr></table></form>';
}

function preSettings() {
document.getElementById('container').innerHTML = '<form onsubmit="settings();"><table><tr><td style="text-decoration:blink;color:333333">Name:</td><td><input id="nickname" type=text maxlength=15 value="'+ getCookie("SdEmuName") +'"><td></tr><tr><td></td><td><input id="openSettings" type="button" value="Settings" onclick="settings();"></td><td></td></tr><tr><td style="color:333333">note:</td><td style="color:333333">if youre not logging in leave the name blank</td></tr></table></form>';
}

function guitarPreSettings() {
document.getElementById('container').innerHTML = '<form onsubmit="guitars();"><table><tr><td style="text-decoration:blink;color:333333">Name:</td><td><input id="nickname" type=text maxlength=15 value="'+ getCookie("SdEmuName") +'"><td></tr><tr><td style="text-decoration:blink;color:333333">Track ID:</td><td><input id="trackId" type=text maxlength=15 value=1000><td></tr><tr><td></td><td><input id="openSettings" type="button" value="Gooooo!" onclick="guitar();"></td><td></td></tr></table></form>';
}


function getHash(tempname) {
var name = tempname.toLowerCase();
var result = 0;
for (var i = 0; i < name.length; i++) {
result = result + name.charCodeAt(i) + name.charCodeAt(i) * (i + 1);
}
return result;
}

function settings() {
if (document.getElementById("nickname").value.length > 0) {
setCookie("SdEmuName",document.getElementById('nickname').value,365);
document.getElementById('container').innerHTML = '<embed width="900" height="369" align="middle" src="/swfs/Options.swf?v=0" flashvars="userId=' + getHash(document.getElementById("nickname").value) + '&amp;username=' + document.getElementById("nickname").value + '" id="Options" quality="high" wmode="opaque" name="Options" allowscriptaccess="sameDomain" pluginspage="//www.adobe.com/go/getflashplayer" type="application/x-shockwave-flash">';
} else {
document.getElementById('container').innerHTML = '<embed width="900" height="369" align="middle" src="/swfs/Options.swf?v=0" flashvars="userId=0&amp;username=guest" id="Options" quality="high" wmode="opaque" name="Options" allowscriptaccess="sameDomain" pluginspage="//www.adobe.com/go/getflashplayer" type="application/x-shockwave-flash">';
}
}

function guitar() {
if (document.getElementById("nickname").value.length > 0) {
setCookie("SdEmuName",document.getElementById('nickname').value,365); //+document.getElementById("trackId").value+
document.getElementById('container').innerHTML = '<embed width="900" height="369" align="middle" src="/swfs/Guitar.swf?v=0" flashvars="trackId='+document.getElementById("trackId").value+'&amp;artistId=12345&amp;songLength=300000&amp;trackURL=track.jam?t='+document.getElementById("trackId").value+'&amp;songURL=song.mp3?t='+document.getElementById("trackId").value+'&amp;userId=' + getHash(document.getElementById("nickname").value) + '&amp;username='+document.getElementById("nickname").value+'&amp;email=random@random.random&amp;song=randomSong&amp;artist=randomArtist&amp;botName=Mr.Gay&amp;bestScore=110000&amp;personalBestScore=90000&amp;goalScore=80000&amp;nextSongUrl=/&amp;nextSongArtist=Who Knows&amp;nextSongName=and who knows that..&amp;songWins=546&amp;xp=132455&amp;currentLevel=54&amp;nextSongWinAchievement=levelup&amp;difficulty=3&amp;keyOption=1&amp;instrument=0&amp;collectEmails=false&amp" id="Guitar" quality="high" wmode="opaque" name="Guitar" allowscriptaccess="sameDomain" pluginspage="//www.adobe.com/go/getflashplayer" type="application/x-shockwave-flash">';
} else {
document.getElementById('container').innerHTML = '<embed width="900" height="369" align="middle" src="/swfs/Guitar.swf?v=0" flashvars="trackId='+document.getElementById("trackId").value+'&amp;artistId=12345&amp;songLength=300000&amp;trackURL=track.jam?t='+document.getElementById("trackId").value+'&amp;songURL=song.mp3?t='+document.getElementById("trackId").value+'&amp;userId=0&amp;username=guest&amp;email=random@random.random&amp;song=randomSong&amp;artist=randomArtist&amp;botName=Mr.Gay&amp;bestScore=110000&amp;personalBestScore=90000&amp;goalScore=80000&amp;nextSongUrl=/&amp;nextSongArtist=Who Knows&amp;nextSongName=and who knows that..&amp;songWins=546&amp;xp=132455&amp;currentLevel=54&amp;nextSongWinAchievement=levelup&amp;difficulty=3&amp;keyOption=1&amp;instrument=0&amp;collectEmails=false&amp" id="Guitar" quality="high" wmode="opaque" name="Guitar" allowscriptaccess="sameDomain" pluginspage="//www.adobe.com/go/getflashplayer" type="application/x-shockwave-flash">';
}
}

function focused() {
document.getElementById('layer').appear({duration:0.5});
}

function blured() {
document.getElementById('layer').fade({duration:0.5});
}

function showdown(additional){
	if (additional) {
		document.getElementById('container').innerHTML = '<embed width="900" height="369" align="middle" src="/swfs/Showdown.swf?v=0" id="Showdown" quality="high" wmode="opaque" name="Showdown" allowscriptaccess="sameDomain" pluginspage="//www.adobe.com/go/getflashplayer" flashvars="managerAddress='+window.location.host+'&amp;managerPort=770&amp;bgImageURL=img/backgrounds/showdown_bg3.jpg&amp;data='+getCookie("SdEmuName")+";"+getCookie("SdEmuPassword")+additional+'" type="application/x-shockwave-flash">';
	} else {
		if (document.getElementById("nickname").value.length > 0) {
			setCookie("SdEmuName",document.getElementById('nickname').value,365);
			if (document.getElementById('password').value.length > 0) {
				setCookie("SdEmuPassword",document.getElementById('password').value,365);
			}
			document.getElementById('container').innerHTML = '<embed width="900" height="369" align="middle" src="/swfs/Showdown.swf?v=0" id="Showdown" quality="high" wmode="opaque" name="Showdown" allowscriptaccess="sameDomain" pluginspage="//www.adobe.com/go/getflashplayer" flashvars="managerAddress='+document.getElementById('address').value+'&amp;managerPort='+document.getElementById('port').value+'&amp;bgImageURL=/img/backgrounds/showdown_bg3.jpg&amp;data='+document.getElementById('nickname').value+";"+document.getElementById('password').value+'" type="application/x-shockwave-flash">';
		} else {
			document.getElementById('container').innerHTML = '<embed width="900" height="369" align="middle" src="/swfs/Showdown.swf?v=0" id="Showdown" quality="high" wmode="opaque" name="Showdown" allowscriptaccess="sameDomain" pluginspage="//www.adobe.com/go/getflashplayer" flashvars="managerAddress='+document.getElementById('address').value+'&amp;managerPort='+document.getElementById('port').value+'&amp;bgImageURL=/img/backgrounds/showdown_bg3.jpg&amp;data=guest;null" type="application/x-shockwave-flash">';
		}
	}
}
</script>

</head>
<body style="background-color:DDDDDD" id="PgBody">
<div style="top:2;position:absolute;width:100%;height:18pt" align="right">
<div style="right:20;position:relative;font-weight:bold;font-size:14">
<a href="Javascript:guitarPreSettings()" class="links" style="text-decoration:none;color:333333">SinglePlayer</a>
<a href="Javascript:showdownPreSettings()" class="links" style="text-decoration:none;color:333333">Showdown</a>
<a href="Javascript:preSettings()" class="links" style="text-decoration:none;color:333333">Options</a>
</div>
</div>

<div style="background-color:000000;display:none;left:0;top:0;position:absolute;width:100%;height:100%" id="layer" onclick="blured()"></div>
<div style="left:0;top:18pt;position:absolute;width:100%" onClick="focused()">
<table width="100%" border=0 style="border-collapse:collapse">
<tr>
<td id="topline" align="center" width="100%" style="background-color:#222222;height:35px">

<div style="background-image:url(/img/backgrounds/image.jpg);left:0;top:0;position:absolute;width:70px;height:35px" id="image"></div>

	<div style="font-variant:small-caps;color:white;font-weight:100;font-size:14">
<table style="color:white;font-weight:100;font-size:14;font-family:Magneto">
<tr>
<td>
                    <div style="display: none;" id="option_difficulty" class="details"></div>
</td>
<td>
                    <div style="display: none;" id="option_keyoption" class="details"></div>
</td>
<td>
                    <div style="display: none;" id="option_instrument" class="details"></div>
</td>
</tr>
</table>
                </div>
</td>
</tr>
<tr>
<td id="container" align="center" width="100%" style="background-image:url(/img/backgrounds/showdown_bg3.jpg);background-position:center;height:369px;background-color:444444">
</td>
</tr>
<tr>
<td id="buttomline" align="center" width="100%" style="background-color:#222222;height:35px">
                <div style="font-variant:small-caps;color:white;display:none;font-weight:100" id="songtitlewrapper">
                    <span id="songtitle" class="content_bar_song" class="details"></span> by 
                    <a id="artistname" href="" class="content_bar_artist" style="color:white;text-decoration:none"></a>
                </div>
</td>
</tr>
</table>
</div>
<div id="sharelinkwrapper" name="sharelinkwrapper" style="display:none;position:absolute;top:0;left:0">
<input type=text id="sharelink" name="sharelink" style="width:250pt;height:18pt">
</div>
<script>
var URL = window.location.href;
if (URL.indexOf("?")+1 < URL.length && URL.indexOf("?") >= 0 && URL.substr(URL.indexOf("?")+1) != "0") {
showdown("&showdownCode="+URL.substr(URL.indexOf("?")+1));
} else {
showdownPreSettings();
}
</script>
</body>
</html>